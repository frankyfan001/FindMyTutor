{"ast":null,"code":"import _slicedToArray from\"/Users/kehongliu/Documents/Temp/455/find-my-tutor/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/* eslint-disable */import React,{useState}from'react';import{Avatar,Button,ButtonGroup,Chip,Grid,makeStyles,Paper,Typography}from'@material-ui/core';import{useHistory,useParams}from'react-router';import{Link}from'react-router-dom';import ThumbUpIcon from'@material-ui/icons/ThumbUp';import{Bookmark,SchoolOutlined,ThumbDown}from'@material-ui/icons';import ContactPhoneIcon from'@material-ui/icons/ContactPhone';import MonetizationOnIcon from'@material-ui/icons/MonetizationOn';import ImportContactsIcon from'@material-ui/icons/ImportContacts';import useComments from'../hooks/useComments';import usePost from'../hooks/usePost';import AddIcon from\"@material-ui/icons/Add\";import Dialog from\"@material-ui/core/Dialog\";import DialogTitle from\"@material-ui/core/DialogTitle\";import DialogContent from\"@material-ui/core/DialogContent\";import DialogContentText from\"@material-ui/core/DialogContentText\";import TextField from\"@material-ui/core/TextField\";import DialogActions from\"@material-ui/core/DialogActions\";import useAlert from\"../hooks/useAlert\";import AlertMessage from\"./AlertMessage\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{root:{width:'80%',margin:'auto'},accountInfo:{width:'100%',height:theme.spacing(60),margin:'auto'},avatar:{width:'100%',height:theme.spacing(40),margin:'auto'},username:{textTransform:'none',minWidth:'8vh',fontWeight:'bold',height:theme.spacing(5)},date:{textTransform:'none',minWidth:'8vh',height:theme.spacing(5)},postInfo:{width:'100%',minHeight:theme.spacing(60),margin:'auto'},availableDays:{width:'100%',minHeight:theme.spacing(15),margin:'auto'},available:{width:theme.spacing(7),height:theme.spacing(4),color:'white',background:'#f1af8d'},unavailable:{width:theme.spacing(7),height:theme.spacing(4),color:'black'},details:{width:'100%',minHeight:theme.spacing(15),margin:'auto'},label:{width:'70%',background:'#a5c1e2'},paper:{width:'91%',margin:'auto'},description:{width:'100%',minHeight:theme.spacing(19),padding:'3% 3% 3% 3%'},button:{background:'linear-gradient(45deg, #F36887AE 30%, #F18651B0 90%)',margin:'auto 3% auto auto'},alertMessageDiv:{maxWidth:'390px',margin:'auto 3% auto auto'},commentListRoot:{width:'92%',margin:'auto'},commentAvatar:{width:theme.spacing(4),height:theme.spacing(4)},thumbUp:{color:'#adc837'},thumbDown:{color:'#dd2d6b'},unselected:{color:'lightgrey',background:'white'},thumbUpSelected:{color:'#adc837',background:'white','&:hover':{color:'#adc837',background:'white'}},thumbDownSelected:{color:'#dd2d6b',background:'white','&:hover':{color:'#dd2d6b',background:'white'}}};});export default function ViewPostPage(_ref){var accountHook=_ref.accountHook;var classes=useStyles();var alertHook=useAlert();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isDialogOpen=_useState2[0],setIsDialogOpen=_useState2[1];var postHook=usePost();var commentsHook=useComments();var post=postHook.post;var comments=commentsHook.comments;var history=useHistory();var content={days:['Mon','Tue','Wed','Thu','Fri','Sat','Sun']};var handleNewCommentButton=function handleNewCommentButton(){if(accountHook.isLogin()&&accountHook.isStudent()){setIsDialogOpen(true);}else{alertHook.switchToFailure(\"Please sign in as a student to add comments.\");setTimeout(function(){history.push(\"/login?type=student\");},3000);}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"br\",{}),post&&/*#__PURE__*/_jsxs(Grid,{container:true,spacing:1,className:classes.root,children:[/*#__PURE__*/_jsx(\"div\",{children:postHook.map}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:12,children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,direction:\"row\",justify:\"space-evenly\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:4,className:classes.accountInfo,children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,direction:\"column\",justify:\"space-evenly\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:12,children:/*#__PURE__*/_jsx(Avatar,{variant:\"square\",className:classes.avatar,alt:post.account_ref.username[0].toUpperCase(),src:post.account_ref.avatar})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:12,children:/*#__PURE__*/_jsx(Typography,{variant:\"h6\",className:classes.username,children:post.account_ref.username})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:12,children:/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",className:classes.date,children:post.createdAt.substring(0,10)})})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:8,className:classes.postInfo,children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:12,className:classes.availableDays,children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,justify:\"space-evenly\",children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:12,children:/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Available Days\"})}),post.availableDays.map(function(available,idx){return/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Chip,{label:content.days[idx],className:available?classes.available:classes.unavailable})},idx);})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:12,className:classes.details,children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:4,children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:12,children:/*#__PURE__*/_jsx(Chip,{color:\"secondary\",icon:/*#__PURE__*/_jsx(SchoolOutlined,{}),label:post.school,className:classes.label})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:12,children:/*#__PURE__*/_jsx(Chip,{color:\"secondary\",icon:/*#__PURE__*/_jsx(ImportContactsIcon,{}),label:post.course,className:classes.label})})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:4,children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:12,children:/*#__PURE__*/_jsx(Chip,{color:\"secondary\",icon:/*#__PURE__*/_jsx(MonetizationOnIcon,{}),label:\"$\"+post.wage+\" / hour\",className:classes.label})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:12,children:/*#__PURE__*/_jsx(Chip,{color:\"secondary\",icon:/*#__PURE__*/_jsx(ContactPhoneIcon,{}),label:post.contact,className:classes.label})})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:4,children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:12,children:/*#__PURE__*/_jsx(Chip,{color:\"secondary\",icon:/*#__PURE__*/_jsx(ThumbUpIcon,{}),label:post.thumbUp,className:classes.label})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:12,children:/*#__PURE__*/_jsx(Chip,{color:\"secondary\",icon:/*#__PURE__*/_jsx(ThumbDown,{}),label:post.thumbDown,className:classes.label})})]})})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:12,children:/*#__PURE__*/_jsx(Paper,{className:classes.paper,children:/*#__PURE__*/_jsx(Typography,{variant:\"body1\",align:\"left\",className:classes.description,children:post.description})})})]})})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:12,align:\"right\",children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",className:classes.button,startIcon:/*#__PURE__*/_jsx(AddIcon,{}),onClick:handleNewCommentButton,children:\"NEW COMMENT\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:12,align:\"right\",children:/*#__PURE__*/_jsx(\"div\",{className:classes.alertMessageDiv,children:/*#__PURE__*/_jsx(AlertMessage,{alertHook:alertHook})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:12,children:/*#__PURE__*/_jsx(CommentList,{comments:comments,accountHook:accountHook})})]}),/*#__PURE__*/_jsx(NewCommentDialog,{isDialogOpen:isDialogOpen,setIsDialogOpen:setIsDialogOpen,accountHook:accountHook,postHook:postHook,commentsHook:commentsHook})]});};var CommentList=function CommentList(_ref2){var comments=_ref2.comments;var classes=useStyles();return/*#__PURE__*/_jsx(Grid,{container:true,direction:\"column\",spacing:0,className:classes.commentListRoot,children:/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Grid,{container:true,alignItems:\"stretch\",children:comments.map(function(comment,idx){return/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,style:{paddingLeft:0,paddingRight:0},children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Comment,{comment:comment})]},idx.toString());})})})});};var Comment=function Comment(_ref3){var comment=_ref3.comment;var classes=useStyles();return/*#__PURE__*/_jsxs(Grid,{container:true,wrap:\"nowrap\",spacing:0,alignContent:\"space-between\",children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:2,align:\"center\",children:/*#__PURE__*/_jsx(Avatar,{alt:comment.account_ref.username[0].toUpperCase(),src:comment.account_ref.avatar,className:classes.commentAvatar})}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:8,children:[/*#__PURE__*/_jsx(\"h4\",{style:{margin:0,textAlign:'left'},children:comment.account_ref.username}),/*#__PURE__*/_jsx(Typography,{style:{textAlign:'left'},children:comment.description}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",display:\"block\",gutterBottom:true,style:{textAlign:'left',color:'grey'},children:'posted at '+comment.createdAt.substring(0,10)})]}),/*#__PURE__*/_jsx(Grid,{item:true,xs:2,align:\"right\",children:comment.isThumbUp?/*#__PURE__*/_jsx(ThumbUpIcon,{className:classes.thumbUp}):/*#__PURE__*/_jsx(ThumbDown,{className:classes.thumbDown})})]});};var NewCommentDialog=function NewCommentDialog(_ref4){var isDialogOpen=_ref4.isDialogOpen,setIsDialogOpen=_ref4.setIsDialogOpen,accountHook=_ref4.accountHook,postHook=_ref4.postHook,commentsHook=_ref4.commentsHook;var classes=useStyles();var _useParams=useParams(),postId=_useParams.postId;var alertHook=useAlert();var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isThumbUp=_useState4[0],setIsThumbUp=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),description=_useState6[0],setDescription=_useState6[1];var handleSubmit=function handleSubmit(){var newComment={isThumbUp:isThumbUp,description:description,account_ref:accountHook.account._id,post_ref:postId};// Add the comment.\nvar promise=commentsHook.addComment(newComment);promise// Update the post with thumbUp/thumbDown + 1.\n.then(function(result){var updatedInfo=isThumbUp?{thumbUp:postHook.post.thumbUp+1}:{thumbDown:postHook.post.thumbDown+1};return postHook.updatePost(postId,updatedInfo);})// Get the comments.\n.then(function(result){return commentsHook.getComments(postId);})// Get the post.\n.then(function(result){return postHook.getPost(postId);})// Clean up.\n.then(function(result){alertHook.switchToSuccess(\"Comment added successfully.\");setTimeout(function(){setIsDialogOpen(false);alertHook.switchToIdle(null);setIsThumbUp(true);setDescription(\"\");},1000);})// Error handling.\n.catch(function(err){alertHook.switchToFailure(err.message);});};var handleCancel=function handleCancel(){setIsDialogOpen(false);if(!alertHook.isIdle()){alertHook.switchToIdle(null);setIsThumbUp(true);setDescription(\"\");}};return/*#__PURE__*/_jsxs(Dialog,{open:isDialogOpen,onClose:handleCancel,children:[/*#__PURE__*/_jsx(DialogTitle,{id:\"form-dialog-title\",children:\"New Comment\"}),/*#__PURE__*/_jsxs(DialogContent,{children:[/*#__PURE__*/_jsx(DialogContentText,{children:\"Good Experience?\"}),/*#__PURE__*/_jsxs(ButtonGroup,{children:[/*#__PURE__*/_jsx(Button,{variant:isThumbUp?\"contained\":\"outlined\",className:isThumbUp?classes.thumbUpSelected:classes.unselected,onClick:function onClick(){setIsThumbUp(true);},children:/*#__PURE__*/_jsx(ThumbUpIcon,{})}),/*#__PURE__*/_jsx(Button,{variant:isThumbUp?\"outlined\":\"contained\",className:isThumbUp?classes.unselected:classes.thumbDownSelected,onClick:function onClick(){setIsThumbUp(false);},children:/*#__PURE__*/_jsx(ThumbDown,{})})]}),/*#__PURE__*/_jsx(TextField,{margin:\"dense\",id:\"comment-id\",label:\"Description\",type:\"text\",fullWidth:true,multiline:true,rows:5,value:description,onChange:function onChange(e){return setDescription(e.target.value);},autoFocus:true,onFocus:function onFocus(e){return e.currentTarget.setSelectionRange(e.currentTarget.value.length,e.currentTarget.value.length);}}),/*#__PURE__*/_jsx(AlertMessage,{alertHook:alertHook})]}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{color:\"primary\",onClick:handleCancel,children:\"CANCEL\"}),/*#__PURE__*/_jsx(Button,{color:\"primary\",onClick:handleSubmit,children:\"SUBMIT\"})]})]});};","map":{"version":3,"sources":["/Users/kehongliu/Documents/Temp/455/find-my-tutor/client/src/frontend/components/ViewPostPage.jsx"],"names":["React","useState","Avatar","Button","ButtonGroup","Chip","Grid","makeStyles","Paper","Typography","useHistory","useParams","Link","ThumbUpIcon","Bookmark","SchoolOutlined","ThumbDown","ContactPhoneIcon","MonetizationOnIcon","ImportContactsIcon","useComments","usePost","AddIcon","Dialog","DialogTitle","DialogContent","DialogContentText","TextField","DialogActions","useAlert","AlertMessage","useStyles","theme","root","width","margin","accountInfo","height","spacing","avatar","username","textTransform","minWidth","fontWeight","date","postInfo","minHeight","availableDays","available","color","background","unavailable","details","label","paper","description","padding","button","alertMessageDiv","maxWidth","commentListRoot","commentAvatar","thumbUp","thumbDown","unselected","thumbUpSelected","thumbDownSelected","ViewPostPage","accountHook","classes","alertHook","isDialogOpen","setIsDialogOpen","postHook","commentsHook","post","comments","history","content","days","handleNewCommentButton","isLogin","isStudent","switchToFailure","setTimeout","push","map","account_ref","toUpperCase","createdAt","substring","idx","school","course","wage","contact","CommentList","comment","paddingLeft","paddingRight","toString","Comment","textAlign","isThumbUp","NewCommentDialog","postId","setIsThumbUp","setDescription","handleSubmit","newComment","account","_id","post_ref","promise","addComment","then","result","updatedInfo","updatePost","getComments","getPost","switchToSuccess","switchToIdle","catch","err","message","handleCancel","isIdle","e","target","value","currentTarget","setSelectionRange","length"],"mappings":"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","sourcesContent":["/* eslint-disable */\nimport React, { useState } from 'react';\nimport {\n  Avatar,\n  Button, ButtonGroup,\n  Chip,\n  Grid,\n  makeStyles,\n  Paper,\n  Typography,\n} from '@material-ui/core';\nimport {useHistory, useParams} from 'react-router';\nimport { Link } from 'react-router-dom';\nimport ThumbUpIcon from '@material-ui/icons/ThumbUp';\nimport {\n  Bookmark, SchoolOutlined, ThumbDown,\n} from '@material-ui/icons';\nimport ContactPhoneIcon from '@material-ui/icons/ContactPhone';\nimport MonetizationOnIcon from '@material-ui/icons/MonetizationOn';\nimport ImportContactsIcon from '@material-ui/icons/ImportContacts';\nimport useComments from '../hooks/useComments';\nimport usePost from '../hooks/usePost';\nimport AddIcon from \"@material-ui/icons/Add\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport TextField from \"@material-ui/core/TextField\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport useAlert from \"../hooks/useAlert\";\nimport AlertMessage from \"./AlertMessage\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '80%',\n    margin: 'auto',\n  },\n  accountInfo: {\n    width: '100%',\n    height: theme.spacing(60),\n    margin: 'auto',\n  },\n  avatar: {\n    width: '100%',\n    height: theme.spacing(40),\n    margin: 'auto',\n  },\n  username: {\n    textTransform: 'none',\n    minWidth: '8vh',\n    fontWeight: 'bold',\n    height: theme.spacing(5),\n  },\n  date: {\n    textTransform: 'none',\n    minWidth: '8vh',\n    height: theme.spacing(5),\n  },\n  postInfo: {\n    width: '100%',\n    minHeight: theme.spacing(60),\n    margin: 'auto',\n  },\n  availableDays: {\n    width: '100%',\n    minHeight: theme.spacing(15),\n    margin: 'auto',\n  },\n  available: {\n    width: theme.spacing(7),\n    height: theme.spacing(4),\n    color: 'white',\n    background: '#f1af8d',\n  },\n  unavailable: {\n    width: theme.spacing(7),\n    height: theme.spacing(4),\n    color: 'black',\n  },\n  details: {\n    width: '100%',\n    minHeight: theme.spacing(15),\n    margin: 'auto',\n  },\n  label: {\n    width: '70%',\n    background: '#a5c1e2',\n  },\n  paper: {\n    width: '91%',\n    margin: 'auto',\n  },\n  description: {\n    width: '100%',\n    minHeight: theme.spacing(19),\n    padding: '3% 3% 3% 3%',\n  },\n  button: {\n    background: 'linear-gradient(45deg, #F36887AE 30%, #F18651B0 90%)',\n    margin: 'auto 3% auto auto',\n  },\n  alertMessageDiv: {\n    maxWidth: '390px',\n    margin: 'auto 3% auto auto',\n  },\n  commentListRoot: {\n    width: '92%',\n    margin: 'auto',\n  },\n  commentAvatar: {\n    width: theme.spacing(4),\n    height: theme.spacing(4),\n  },\n  thumbUp: {\n    color: '#adc837',\n  },\n  thumbDown: {\n    color: '#dd2d6b',\n  },\n  unselected: {\n    color: 'lightgrey',\n    background: 'white',\n  },\n  thumbUpSelected: {\n    color: '#adc837',\n    background: 'white',\n    '&:hover': {\n      color: '#adc837',\n      background: 'white',\n    },\n  },\n  thumbDownSelected: {\n    color: '#dd2d6b',\n    background: 'white',\n    '&:hover': {\n      color: '#dd2d6b',\n      background: 'white',\n    },\n  },\n}));\n\nexport default function ViewPostPage({ accountHook }) {\n  const classes = useStyles();\n\n  const alertHook = useAlert();\n\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n\n  const postHook = usePost();\n  const commentsHook = useComments();\n\n  const post = postHook.post;\n  const comments = commentsHook.comments;\n\n  const history = useHistory();\n\n  const content = {\n    days: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']\n  };\n\n  const handleNewCommentButton = () => {\n    if (accountHook.isLogin() && accountHook.isStudent()) {\n      setIsDialogOpen(true);\n    } else {\n      alertHook.switchToFailure(\"Please sign in as a student to add comments.\");\n      setTimeout(function () {\n        history.push(\"/login?type=student\");\n      }, 3000)\n    }\n  };\n\n  return (\n    <>\n      <br />\n      {post &&\n      <Grid container spacing={1} className={classes.root}>\n\n        {/* TODO: Kevin */}\n        <div>\n          {postHook.map}\n        </div>\n\n        {/*Post*/}\n        <Grid item xs={12} md={12}>\n          <Grid container spacing={3} direction=\"row\" justify=\"space-evenly\" alignItems=\"center\">\n\n            {/*Account Info*/}\n            <Grid item xs={12} md={4} className={classes.accountInfo}>\n              <Grid container spacing={3} direction=\"column\" justify=\"space-evenly\" alignItems=\"center\">\n\n                {/*Avatar*/}\n                <Grid item xs={12} md={12}>\n                  <Avatar variant=\"square\" className={classes.avatar} alt={post.account_ref.username[0].toUpperCase()} src={post.account_ref.avatar} />\n                </Grid>\n\n                {/*Username*/}\n                <Grid item xs={12} md={12}>\n                  <Typography variant=\"h6\" className={classes.username}>\n                    {post.account_ref.username}\n                  </Typography>\n                </Grid>\n\n                {/*Date*/}\n                <Grid item xs={12} md={12}>\n                  <Typography variant=\"subtitle1\" className={classes.date}>\n                    {post.createdAt.substring(0,10)}\n                  </Typography>\n                </Grid>\n              </Grid>\n            </Grid>\n\n            {/*Post Info*/}\n            <Grid item xs={12} md={8} className={classes.postInfo}>\n              <Grid container spacing={3}>\n\n                {/*Available Days*/}\n                <Grid item xs={12} md={12} className={classes.availableDays}>\n                  <Grid container spacing={2} justify=\"space-evenly\">\n\n                    <Grid item xs={12} md={12}>\n                      <Typography variant=\"h6\">Available Days</Typography>\n                    </Grid>\n\n                    {post.availableDays.map((available, idx) => (\n                      <Grid item key={idx}>\n                        <Chip label={content.days[idx]} className={available ? classes.available : classes.unavailable}/>\n                      </Grid>\n                    ))}\n                  </Grid>\n                </Grid>\n\n                {/*Details*/}\n                <Grid item xs={12} md={12} className={classes.details}>\n                  <Grid container spacing={2}>\n\n                    <Grid item xs={12} md={4}>\n                      <Grid container spacing={2}>\n\n                        {/*School*/}\n                        <Grid item xs={12} md={12}>\n                          <Chip color='secondary' icon={<SchoolOutlined />} label={post.school} className={classes.label} />\n                        </Grid>\n\n                        {/*Course*/}\n                        <Grid item xs={12} md={12}>\n                          <Chip color='secondary' icon={<ImportContactsIcon />} label={post.course} className={classes.label} />\n                        </Grid>\n\n                      </Grid>\n                    </Grid>\n\n                    <Grid item xs={12} md={4}>\n                      <Grid container spacing={2}>\n\n                        {/*Wage*/}\n                        <Grid item xs={12} md={12}>\n                          <Chip color='secondary' icon={<MonetizationOnIcon />} label={\"$\" + post.wage + \" / hour\"} className={classes.label} />\n                        </Grid>\n\n                        {/*Contact*/}\n                        <Grid item xs={12} md={12}>\n                          <Chip color='secondary' icon={<ContactPhoneIcon />} label={post.contact} className={classes.label} />\n                        </Grid>\n\n                      </Grid>\n                    </Grid>\n\n                    <Grid item xs={12} md={4}>\n                      <Grid container spacing={2}>\n\n                        {/*ThumbUp*/}\n                        <Grid item xs={12} md={12}>\n                          <Chip color='secondary' icon={<ThumbUpIcon />} label={post.thumbUp} className={classes.label} />\n                        </Grid>\n\n                        {/*ThumbDown*/}\n                        <Grid item xs={12} md={12}>\n                          <Chip color='secondary' icon={<ThumbDown />} label={post.thumbDown} className={classes.label} />\n                        </Grid>\n\n                      </Grid>\n                    </Grid>\n\n                  </Grid>\n                </Grid>\n\n                {/*Descriptions*/}\n                <Grid item xs={12} md={12}>\n                  <Paper className={classes.paper}>\n                    <Typography variant=\"body1\" align=\"left\" className={classes.description}>\n                      {post.description}\n                    </Typography>\n                  </Paper>\n                </Grid>\n\n              </Grid>\n            </Grid>\n          </Grid>\n\n        </Grid>\n\n        {/*New Comment Button*/}\n        <Grid item xs={12} md={12} align=\"right\">\n          <Button variant=\"contained\" color=\"primary\" className={classes.button} startIcon={<AddIcon />}\n                  onClick={handleNewCommentButton}>\n            NEW COMMENT\n          </Button>\n        </Grid>\n\n        {/*Show the alert message when user is not a login student.*/}\n        <Grid item xs={12} md={12} align=\"right\">\n          <div className={classes.alertMessageDiv}>\n            <AlertMessage alertHook={alertHook} />\n          </div>\n        </Grid>\n\n        {/*Comments*/}\n        <Grid item xs={12} md={12}>\n          <CommentList comments={comments} accountHook={accountHook}/>\n        </Grid>\n\n        {/* TODO: Jerry - pagination */}\n\n      </Grid>\n      }\n\n      {/*New Comment Dialog*/}\n      <NewCommentDialog\n        isDialogOpen={isDialogOpen}\n        setIsDialogOpen={setIsDialogOpen}\n        accountHook={accountHook}\n        postHook={postHook}\n        commentsHook={commentsHook}\n      />\n    </>\n  );\n};\n\nconst CommentList = ({ comments }) => {\n  const classes = useStyles();\n\n  return (\n    <Grid container direction=\"column\" spacing={0} className={classes.commentListRoot}>\n      <Grid item>\n        <Grid container alignItems=\"stretch\">\n          {comments.map((comment, idx) => (\n            <Grid item key={idx.toString()} xs={12} style={{ paddingLeft: 0, paddingRight: 0 }}>\n              <br />\n              <Comment comment={comment} />\n            </Grid>\n          ))}\n        </Grid>\n      </Grid>\n    </Grid>\n  );\n};\n\nconst Comment = ({ comment }) => {\n  const classes = useStyles();\n\n  return (\n    <Grid container wrap=\"nowrap\" spacing={0} alignContent=\"space-between\">\n      <Grid item xs={2} align=\"center\">\n        <Avatar alt={comment.account_ref.username[0].toUpperCase()} src={comment.account_ref.avatar} className={classes.commentAvatar} />\n      </Grid>\n      <Grid item xs={8}>\n        <h4 style={{ margin: 0, textAlign: 'left' }}>\n          {comment.account_ref.username}\n        </h4>\n        <Typography style={{ textAlign: 'left' }}>\n          {comment.description}\n        </Typography>\n        <br />\n        <Typography variant=\"caption\" display=\"block\" gutterBottom style={{ textAlign: 'left', color: 'grey' }}>\n          { 'posted at ' + comment.createdAt.substring(0,10) }\n        </Typography>\n      </Grid>\n      <Grid item xs={2} align=\"right\">\n        { comment.isThumbUp ?\n          <ThumbUpIcon className={classes.thumbUp} /> :\n          <ThumbDown className={classes.thumbDown} />}\n      </Grid>\n    </Grid>\n  );\n};\n\nconst NewCommentDialog = ({ isDialogOpen, setIsDialogOpen, accountHook, postHook, commentsHook }) => {\n  const classes = useStyles();\n  const { postId } = useParams();\n\n  const alertHook = useAlert();\n\n  const [isThumbUp, setIsThumbUp] = useState(true);\n  const [description, setDescription] = useState(\"\");\n\n  const handleSubmit = () => {\n    const newComment = {\n      isThumbUp,\n      description,\n      account_ref: accountHook.account._id,\n      post_ref: postId\n    };\n    // Add the comment.\n    const promise = commentsHook.addComment(newComment);\n    promise\n      // Update the post with thumbUp/thumbDown + 1.\n      .then((result) => {\n        const updatedInfo = isThumbUp ?\n          {thumbUp: postHook.post.thumbUp + 1} :\n          {thumbDown: postHook.post.thumbDown + 1};\n        return postHook.updatePost(postId, updatedInfo);\n      })\n      // Get the comments.\n      .then((result) => {\n        return commentsHook.getComments(postId);\n      })\n      // Get the post.\n      .then((result) => {\n        return postHook.getPost(postId);\n      })\n      // Clean up.\n      .then((result) => {\n        alertHook.switchToSuccess(\"Comment added successfully.\");\n        setTimeout(function () {\n          setIsDialogOpen(false);\n          alertHook.switchToIdle(null);\n          setIsThumbUp(true);\n          setDescription(\"\");\n        }, 1000)\n      })\n      // Error handling.\n      .catch((err) => {\n        alertHook.switchToFailure(err.message);\n      });\n  }\n\n  const handleCancel = () => {\n    setIsDialogOpen(false);\n    if (!alertHook.isIdle()) {\n      alertHook.switchToIdle(null);\n      setIsThumbUp(true);\n      setDescription(\"\");\n    }\n  }\n\n  return (\n    <Dialog open={isDialogOpen} onClose={handleCancel}>\n      <DialogTitle id=\"form-dialog-title\">New Comment</DialogTitle>\n      <DialogContent>\n        <DialogContentText>Good Experience?</DialogContentText>\n        <ButtonGroup>\n          <Button variant={isThumbUp ? \"contained\" : \"outlined\"}\n                  className={isThumbUp ? classes.thumbUpSelected : classes.unselected}\n                  onClick={() => {setIsThumbUp(true)}}>\n            <ThumbUpIcon />\n          </Button>\n          <Button variant={isThumbUp ? \"outlined\" : \"contained\"}\n                  className={isThumbUp ? classes.unselected : classes.thumbDownSelected}\n                  onClick={() => {setIsThumbUp(false)}}>\n            <ThumbDown />\n          </Button>\n        </ButtonGroup>\n        <TextField\n          margin=\"dense\"\n          id=\"comment-id\"\n          label=\"Description\"\n          type=\"text\"\n          fullWidth\n          multiline\n          rows={5}\n          value={description}\n          onChange={e => setDescription(e.target.value)}\n          autoFocus\n          onFocus={(e) =>\n            e.currentTarget.setSelectionRange(\n              e.currentTarget.value.length,\n              e.currentTarget.value.length)}\n        />\n\n        {/*Show the alert message when adding a comment failed.*/}\n        <AlertMessage alertHook={alertHook} />\n\n      </DialogContent>\n      <DialogActions>\n        <Button color=\"primary\" onClick={handleCancel}>\n          CANCEL\n        </Button>\n        <Button color=\"primary\" onClick={handleSubmit} >\n          SUBMIT\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}