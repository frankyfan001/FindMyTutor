{"ast":null,"code":"import _regeneratorRuntime from\"/Users/kehongliu/Documents/Temp/455/find-my-tutor/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/kehongliu/Documents/Temp/455/find-my-tutor/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/kehongliu/Documents/Temp/455/find-my-tutor/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/* eslint-disable */import{useState}from'react';export default function useAccount(){// State: account\nvar _useState=useState(null),_useState2=_slicedToArray(_useState,2),account=_useState2[0],setAccount=_useState2[1];var isLogin=function isLogin(){return account!==null;};var isTutor=function isTutor(){return account.type==='tutor';};var isStudent=function isStudent(){return account.type==='student';};// setters\nvar register=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(input){var res,output;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch('http://localhost:5000/accounts/register',{method:'POST',headers:{'Content-type':'application/json'},body:JSON.stringify(input)});case 2:res=_context.sent;_context.next=5;return res.json();case 5:output=_context.sent;if(!output.success){_context.next=11;break;}setAccount(output.result);return _context.abrupt(\"return\",output.result);case 11:throw new Error(output.error);case 12:case\"end\":return _context.stop();}}},_callee);}));return function register(_x){return _ref.apply(this,arguments);};}();var login=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(input){var res,output;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch('http://localhost:5000/accounts/login',{method:'POST',headers:{'Content-type':'application/json'},body:JSON.stringify(input)});case 2:res=_context2.sent;_context2.next=5;return res.json();case 5:output=_context2.sent;if(!output.success){_context2.next=11;break;}setAccount(output.result);return _context2.abrupt(\"return\",output.result);case 11:throw new Error(output.error);case 12:case\"end\":return _context2.stop();}}},_callee2);}));return function login(_x2){return _ref2.apply(this,arguments);};}();var logout=function logout(){setAccount(null);};return{account:account,isLogin:isLogin,isTutor:isTutor,isStudent:isStudent,register:register,login:login,logout:logout};}","map":{"version":3,"sources":["/Users/kehongliu/Documents/Temp/455/find-my-tutor/client/src/frontend/hooks/useAccount.jsx"],"names":["useState","useAccount","account","setAccount","isLogin","isTutor","type","isStudent","register","input","fetch","method","headers","body","JSON","stringify","res","json","output","success","result","Error","error","login","logout"],"mappings":"0gBAAA,oBACA,OAASA,QAAT,KAAyB,OAAzB,CAEA,cAAe,SAASC,CAAAA,UAAT,EAAsB,CACnC;AACA,cAA8BD,QAAQ,CAAC,IAAD,CAAtC,wCAAOE,OAAP,eAAgBC,UAAhB,eAEA,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAM,CACpB,MAAOF,CAAAA,OAAO,GAAK,IAAnB,CACD,CAFD,CAIA,GAAMG,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAM,CACpB,MAAOH,CAAAA,OAAO,CAACI,IAAR,GAAiB,OAAxB,CACD,CAFD,CAIA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CACtB,MAAOL,CAAAA,OAAO,CAACI,IAAR,GAAiB,SAAxB,CACD,CAFD,CAIA;AACA,GAAME,CAAAA,QAAQ,0FAAG,iBAAOC,KAAP,uJACGC,CAAAA,KAAK,CAAC,yCAAD,CAA4C,CACjEC,MAAM,CAAE,MADyD,CAEjEC,OAAO,CAAE,CAAC,eAAgB,kBAAjB,CAFwD,CAGjEC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeN,KAAf,CAH2D,CAA5C,CADR,QACTO,GADS,qCAMMA,CAAAA,GAAG,CAACC,IAAJ,EANN,QAMTC,MANS,mBASXA,MAAM,CAACC,OATI,0BAUbhB,UAAU,CAACe,MAAM,CAACE,MAAR,CAAV,CAVa,gCAWNF,MAAM,CAACE,MAXD,eAaP,IAAIC,CAAAA,KAAJ,CAAUH,MAAM,CAACI,KAAjB,CAbO,wDAAH,kBAARd,CAAAA,QAAQ,4CAAd,CAiBA,GAAMe,CAAAA,KAAK,2FAAG,kBAAOd,KAAP,4JACMC,CAAAA,KAAK,CAAC,sCAAD,CAAyC,CAC9DC,MAAM,CAAE,MADsD,CAE9DC,OAAO,CAAE,CAAC,eAAgB,kBAAjB,CAFqD,CAG9DC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeN,KAAf,CAHwD,CAAzC,CADX,QACNO,GADM,uCAMSA,CAAAA,GAAG,CAACC,IAAJ,EANT,QAMNC,MANM,oBAQRA,MAAM,CAACC,OARC,2BASVhB,UAAU,CAACe,MAAM,CAACE,MAAR,CAAV,CATU,iCAUHF,MAAM,CAACE,MAVJ,eAYJ,IAAIC,CAAAA,KAAJ,CAAUH,MAAM,CAACI,KAAjB,CAZI,0DAAH,kBAALC,CAAAA,KAAK,8CAAX,CAgBA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,CACnBrB,UAAU,CAAC,IAAD,CAAV,CACD,CAFD,CAIA,MAAO,CAAED,OAAO,CAAPA,OAAF,CAAWE,OAAO,CAAPA,OAAX,CAAoBC,OAAO,CAAPA,OAApB,CAA6BE,SAAS,CAATA,SAA7B,CAAwCC,QAAQ,CAARA,QAAxC,CAAkDe,KAAK,CAALA,KAAlD,CAAyDC,MAAM,CAANA,MAAzD,CAAP,CACD","sourcesContent":["/* eslint-disable */\nimport { useState } from 'react';\n\nexport default function useAccount() {\n  // State: account\n  const [account, setAccount] = useState(null);\n\n  const isLogin = () => {\n    return account !== null;\n  };\n\n  const isTutor = () => {\n    return account.type === 'tutor';\n  };\n\n  const isStudent = () => {\n    return account.type === 'student';\n  };\n\n  // setters\n  const register = async (input) => {\n    const res = await fetch('http://localhost:5000/accounts/register', {\n      method: 'POST',\n      headers: {'Content-type': 'application/json'},\n      body: JSON.stringify(input)\n    });\n    const output = await res.json();\n\n    // If register succeeded, login directly.\n    if (output.success) {\n      setAccount(output.result);\n      return output.result;\n    } else {\n      throw new Error(output.error);\n    }\n  };\n\n  const login = async (input) => {\n    const res = await fetch('http://localhost:5000/accounts/login', {\n      method: 'POST',\n      headers: {'Content-type': 'application/json'},\n      body: JSON.stringify(input)\n    });\n    const output = await res.json();\n\n    if (output.success) {\n      setAccount(output.result);\n      return output.result;\n    } else {\n      throw new Error(output.error);\n    }\n  };\n\n  const logout = () => {\n    setAccount(null);\n  };\n\n  return { account, isLogin, isTutor, isStudent, register, login, logout};\n}\n"]},"metadata":{},"sourceType":"module"}