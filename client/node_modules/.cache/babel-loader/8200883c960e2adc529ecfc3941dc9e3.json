{"ast":null,"code":"\"use strict\";\n\nexports.__esModule = true;\nexports[\"default\"] = exports.slotable = exports.createSlotComponents = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _utils = require(\"./utils\");\n\nvar _lodash = _interopRequireDefault(require(\"lodash.get\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\n          var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {};\n\n          if (desc.get || desc.set) {\n            Object.defineProperty(newObj, key, desc);\n          } else {\n            newObj[key] = obj[key];\n          }\n        }\n      }\n    }\n\n    newObj[\"default\"] = obj;\n    return newObj;\n  }\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar findRootType = function findRootType(relations) {\n  return ((0, _utils.toArr)(relations).find(function (v) {\n    return v.root;\n  }) || {}).type;\n};\n\nvar isSlot = function isSlot(val) {\n  return val && val.type && (val.areas || val.elements || val.props);\n};\n\nvar createSlotComponents = function createSlotComponents(Target, relations) {\n  var RelationsMap = {};\n  var ROOT_TYPE = Target.displayName || findRootType(relations) || \"SlotComponent\";\n\n  var getItemByType = function getItemByType(type) {\n    return RelationsMap[type];\n  };\n\n  var createSlotGetter = function createSlotGetter(slots) {\n    var getter = function getter(path, _getter) {\n      return (0, _utils.isFn)(_getter) ? _getter((0, _lodash[\"default\"])(slots, path)) : (0, _lodash[\"default\"])(slots, path);\n    };\n\n    getter.has = function (path) {\n      var slot = (0, _lodash[\"default\"])(slots, path);\n      return isSlot(slot) ? true : Array.isArray(slot) && isSlot(slot[0]);\n    };\n\n    getter.render = function (path, render, otherwise) {\n      var slot = (0, _lodash[\"default\"])(slots, path);\n\n      if (isSlot(slot)) {\n        if (slot.props) {\n          if ((0, _utils.isFn)(slot.props.children)) {\n            return (0, _utils.isFn)(render) ? render(slot.props.children, slot.props, slot.type) : slot.props.children();\n          } else {\n            return (0, _utils.isFn)(render) ? render(function () {\n              return slot.props.children;\n            }, slot.props, slot.type) : slot.props.children;\n          }\n        }\n      } else if (Array.isArray(slot)) {\n        var childrens = slot.map(function (item, key) {\n          if (isSlot(item)) {\n            if (item.props) {\n              if ((0, _utils.isFn)(item.props.children)) {\n                return (0, _utils.isFn)(render) ? render(item.props.children, item.props, item.type, key) : item.props.children(key);\n              } else {\n                return (0, _utils.isFn)(render) ? render(function () {\n                  return item.props.children;\n                }, item.props, item.type, key) : item.props.children;\n              }\n            }\n          }\n        });\n        return _react[\"default\"].createElement.apply(_react[\"default\"], [_react[\"default\"].Fragment, {}].concat(childrens));\n      } else {\n        if ((0, _utils.isFn)(otherwise)) {\n          return otherwise();\n        }\n      }\n    };\n\n    return getter;\n  };\n\n  var SlotComponent = /*#__PURE__*/function (_Component) {\n    _inheritsLoose(SlotComponent, _Component);\n\n    function SlotComponent() {\n      var _this;\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      _this = _Component.call.apply(_Component, [this].concat(args)) || this;\n\n      _defineProperty(_assertThisInitialized(_this), \"notify\", function () {\n        if (_this.unmounted) return;\n\n        _this.forceUpdate();\n      });\n\n      _defineProperty(_assertThisInitialized(_this), \"timer\", {});\n\n      return _this;\n    }\n\n    var _proto = SlotComponent.prototype;\n\n    _proto.componentWillUnmount = function componentWillUnmount() {\n      this.unmounted = true;\n    };\n\n    _proto.componentDidMount = function componentDidMount() {\n      this.unmounted = false;\n    };\n\n    _proto.render = function render() {\n      var _this$props = this.props,\n          forwardRef = _this$props.forwardRef,\n          slots = _this$props.slots,\n          children = _this$props.children,\n          others = _objectWithoutPropertiesLoose(_this$props, [\"forwardRef\", \"slots\", \"children\"]);\n\n      var config = slots || {};\n      return _react[\"default\"].createElement(_react[\"default\"].Fragment, null, _react[\"default\"].createElement(\"template\", null, _react[\"default\"].createElement(_utils.DslContext.Provider, {\n        value: {\n          type: ROOT_TYPE,\n          getItemByType: getItemByType,\n          config: config,\n          timer: this.timer,\n          notify: this.notify,\n          path: []\n        }\n      }, children)), function () {\n        var slot = createSlotGetter(config);\n        return _react[\"default\"].createElement(_utils.SlotContext.Provider, {\n          value: slot\n        }, _react[\"default\"].createElement(Target, _extends({}, others, {\n          ref: forwardRef,\n          slot: slot\n        })));\n      }());\n    };\n\n    return SlotComponent;\n  }(_react.Component);\n\n  _defineProperty(SlotComponent, \"displayName\", ROOT_TYPE);\n\n  var Wrapper = _react[\"default\"].forwardRef(function (props, ref) {\n    return _react[\"default\"].createElement(SlotComponent, _extends({}, props, {\n      forwardRef: ref\n    }));\n  });\n\n  (0, _utils.toArr)(relations).forEach(function (item) {\n    if (item && item.type) {\n      RelationsMap[item.type] = RelationsMap[item.type] || item;\n\n      if (item.type !== ROOT_TYPE) {\n        Wrapper[item.type] = (0, _utils.createRelationComponent)(item.type);\n      }\n    }\n  });\n  return Wrapper;\n};\n\nexports.createSlotComponents = createSlotComponents;\n\nvar slotable = function slotable() {\n  return function (Target) {\n    return function (props) {\n      return _react[\"default\"].createElement(_utils.SlotContext.Consumer, null, function (slot) {\n        return _react[\"default\"].createElement(Target, _extends({}, props, {\n          slot: slot\n        }));\n      });\n    };\n  };\n};\n\nexports.slotable = slotable;\nvar _default = createSlotComponents;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/kehongliu/Documents/Temp/455/find-my-tutor/client/node_modules/react-slot-props/lib/index.js"],"names":["exports","__esModule","slotable","createSlotComponents","_react","_interopRequireWildcard","require","_utils","_lodash","_interopRequireDefault","obj","newObj","key","Object","prototype","hasOwnProperty","call","desc","defineProperty","getOwnPropertyDescriptor","get","set","_extends","assign","target","i","arguments","length","source","apply","_objectWithoutPropertiesLoose","excluded","sourceKeys","keys","indexOf","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","create","constructor","__proto__","_defineProperty","value","enumerable","configurable","writable","findRootType","relations","toArr","find","v","root","type","isSlot","val","areas","elements","props","Target","RelationsMap","ROOT_TYPE","displayName","getItemByType","createSlotGetter","slots","getter","path","_getter","isFn","has","slot","Array","isArray","render","otherwise","children","childrens","map","item","createElement","Fragment","concat","SlotComponent","_Component","_this","_len","args","_key","unmounted","forceUpdate","_proto","componentWillUnmount","componentDidMount","_this$props","forwardRef","others","config","DslContext","Provider","timer","notify","SlotContext","ref","Component","Wrapper","forEach","createRelationComponent","Consumer","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\nexports[\"default\"] = exports.slotable = exports.createSlotComponents = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _utils = require(\"./utils\");\n\nvar _lodash = _interopRequireDefault(require(\"lodash.get\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj[\"default\"] = obj; return newObj; } }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar findRootType = function findRootType(relations) {\n  return ((0, _utils.toArr)(relations).find(function (v) {\n    return v.root;\n  }) || {}).type;\n};\n\nvar isSlot = function isSlot(val) {\n  return val && val.type && (val.areas || val.elements || val.props);\n};\n\nvar createSlotComponents = function createSlotComponents(Target, relations) {\n  var RelationsMap = {};\n  var ROOT_TYPE = Target.displayName || findRootType(relations) || \"SlotComponent\";\n\n  var getItemByType = function getItemByType(type) {\n    return RelationsMap[type];\n  };\n\n  var createSlotGetter = function createSlotGetter(slots) {\n    var getter = function getter(path, _getter) {\n      return (0, _utils.isFn)(_getter) ? _getter((0, _lodash[\"default\"])(slots, path)) : (0, _lodash[\"default\"])(slots, path);\n    };\n\n    getter.has = function (path) {\n      var slot = (0, _lodash[\"default\"])(slots, path);\n      return isSlot(slot) ? true : Array.isArray(slot) && isSlot(slot[0]);\n    };\n\n    getter.render = function (path, render, otherwise) {\n      var slot = (0, _lodash[\"default\"])(slots, path);\n\n      if (isSlot(slot)) {\n        if (slot.props) {\n          if ((0, _utils.isFn)(slot.props.children)) {\n            return (0, _utils.isFn)(render) ? render(slot.props.children, slot.props, slot.type) : slot.props.children();\n          } else {\n            return (0, _utils.isFn)(render) ? render(function () {\n              return slot.props.children;\n            }, slot.props, slot.type) : slot.props.children;\n          }\n        }\n      } else if (Array.isArray(slot)) {\n        var childrens = slot.map(function (item, key) {\n          if (isSlot(item)) {\n            if (item.props) {\n              if ((0, _utils.isFn)(item.props.children)) {\n                return (0, _utils.isFn)(render) ? render(item.props.children, item.props, item.type, key) : item.props.children(key);\n              } else {\n                return (0, _utils.isFn)(render) ? render(function () {\n                  return item.props.children;\n                }, item.props, item.type, key) : item.props.children;\n              }\n            }\n          }\n        });\n        return _react[\"default\"].createElement.apply(_react[\"default\"], [_react[\"default\"].Fragment, {}].concat(childrens));\n      } else {\n        if ((0, _utils.isFn)(otherwise)) {\n          return otherwise();\n        }\n      }\n    };\n\n    return getter;\n  };\n\n  var SlotComponent =\n  /*#__PURE__*/\n  function (_Component) {\n    _inheritsLoose(SlotComponent, _Component);\n\n    function SlotComponent() {\n      var _this;\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      _this = _Component.call.apply(_Component, [this].concat(args)) || this;\n\n      _defineProperty(_assertThisInitialized(_this), \"notify\", function () {\n        if (_this.unmounted) return;\n\n        _this.forceUpdate();\n      });\n\n      _defineProperty(_assertThisInitialized(_this), \"timer\", {});\n\n      return _this;\n    }\n\n    var _proto = SlotComponent.prototype;\n\n    _proto.componentWillUnmount = function componentWillUnmount() {\n      this.unmounted = true;\n    };\n\n    _proto.componentDidMount = function componentDidMount() {\n      this.unmounted = false;\n    };\n\n    _proto.render = function render() {\n      var _this$props = this.props,\n          forwardRef = _this$props.forwardRef,\n          slots = _this$props.slots,\n          children = _this$props.children,\n          others = _objectWithoutPropertiesLoose(_this$props, [\"forwardRef\", \"slots\", \"children\"]);\n\n      var config = slots || {};\n      return _react[\"default\"].createElement(_react[\"default\"].Fragment, null, _react[\"default\"].createElement(\"template\", null, _react[\"default\"].createElement(_utils.DslContext.Provider, {\n        value: {\n          type: ROOT_TYPE,\n          getItemByType: getItemByType,\n          config: config,\n          timer: this.timer,\n          notify: this.notify,\n          path: []\n        }\n      }, children)), function () {\n        var slot = createSlotGetter(config);\n        return _react[\"default\"].createElement(_utils.SlotContext.Provider, {\n          value: slot\n        }, _react[\"default\"].createElement(Target, _extends({}, others, {\n          ref: forwardRef,\n          slot: slot\n        })));\n      }());\n    };\n\n    return SlotComponent;\n  }(_react.Component);\n\n  _defineProperty(SlotComponent, \"displayName\", ROOT_TYPE);\n\n  var Wrapper = _react[\"default\"].forwardRef(function (props, ref) {\n    return _react[\"default\"].createElement(SlotComponent, _extends({}, props, {\n      forwardRef: ref\n    }));\n  });\n\n  (0, _utils.toArr)(relations).forEach(function (item) {\n    if (item && item.type) {\n      RelationsMap[item.type] = RelationsMap[item.type] || item;\n\n      if (item.type !== ROOT_TYPE) {\n        Wrapper[item.type] = (0, _utils.createRelationComponent)(item.type);\n      }\n    }\n  });\n  return Wrapper;\n};\n\nexports.createSlotComponents = createSlotComponents;\n\nvar slotable = function slotable() {\n  return function (Target) {\n    return function (props) {\n      return _react[\"default\"].createElement(_utils.SlotContext.Consumer, null, function (slot) {\n        return _react[\"default\"].createElement(Target, _extends({}, props, {\n          slot: slot\n        }));\n      });\n    };\n  };\n};\n\nexports.slotable = slotable;\nvar _default = createSlotComponents;\nexports[\"default\"] = _default;"]},"metadata":{},"sourceType":"script"}